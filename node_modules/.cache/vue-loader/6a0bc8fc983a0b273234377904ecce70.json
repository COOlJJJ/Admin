{"remainingRequest":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\src\\views\\permission\\role.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\src\\views\\permission\\role.vue","mtime":1649400033602},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnCmltcG9ydCB7IGRlZXBDbG9uZSB9IGZyb20gJ0AvdXRpbHMnCmltcG9ydCB7IGdldFJvbGVzLCBhZGRSb2xlLCBkZWxldGVSb2xlLCB1cGRhdGVSb2xlIH0gZnJvbSAnQC9hcGkvcm9sZScKCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGU6IHt9LAogICAgICByb2xlc0xpc3Q6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ25ldycsCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRSb2xlcygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVEZWxldGUoeyAkaW5kZXgsIHJvdyB9KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ0NvbmZpcm0gdG8gcmVtb3ZlIHRoZSByb2xlPycsICdXYXJuaW5nJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnQ29uZmlybScsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgYXdhaXQgZGVsZXRlUm9sZShyb3cuaWQpCiAgICAgICAgICB0aGlzLnJvbGVzTGlzdC5zcGxpY2UoJGluZGV4LCAxKQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZSBzdWNjZWQhJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4geyBjb25zb2xlLmVycm9yKGVycikgfSkKICAgIH0sCgogICAgYXN5bmMgY29uZmlybVJvbGUoKSB7CiAgICAgIGNvbnN0IGlzRWRpdCA9IHRoaXMuZGlhbG9nVHlwZSA9PT0gJ2VkaXQnCiAgICAgIGlmIChpc0VkaXQpIHsKICAgICAgICBhd2FpdCB1cGRhdGVSb2xlKHRoaXMucm9sZSkKICAgICAgICB0aGlzLmdldFJvbGVzKCkKICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCBhZGRSb2xlKHRoaXMucm9sZSkKICAgICAgICB0aGlzLmdldFJvbGVzKCkKICAgICAgfQogICAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB0aGlzLnJvbGUKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiBgCiAgICAgICAgICAgIDxkaXY+Um9sZSBOYW1lOiAke25hbWV9PC9kaXY+CiAgICAgICAgICAgIDxkaXY+RGVzY3JpcHRpb246ICR7ZGVzY3JpcHRpb259PC9kaXY+CiAgICAgICAgICBgLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KQogICAgICB0aGlzLnJvbGUgPSB7fQogICAgfSwKCiAgICBhc3luYyBnZXRSb2xlcygpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0Um9sZXMoKQogICAgICB0aGlzLnJvbGVzTGlzdCA9IHJlcy5yZXNwb25zZQogICAgfSwKICAgIGhhbmRsZUFkZFJvbGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICduZXcnCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVFZGl0KHNjb3BlKSB7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICdlZGl0JwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuY2hlY2tTdHJpY3RseSA9IHRydWUKICAgICAgdGhpcy5yb2xlID0gZGVlcENsb25lKHNjb3BlLnJvdykKICAgIH0KICB9LAoKfQoK"},{"version":3,"sources":["role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"role.vue","sourceRoot":"src/views/permission","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-button type=\"primary\" @click=\"handleAddRole\">New Role</el-button>\n\n    <el-table :data=\"rolesList\" style=\"width: 100%; margin-top: 30px\" border>\n      <el-table-column align=\"center\" label=\"Role Key\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.id }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"Role Name\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.name }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"Description\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.description }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"Operations\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope)\"\n            >Edit</el-button\n          >\n          <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope)\"\n            >Delete</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      :title=\"dialogType === 'edit' ? 'Edit Role' : 'New Role'\"\n    >\n      <el-form :model=\"role\" label-width=\"80px\" label-position=\"left\">\n        <el-form-item label=\"Name\">\n          <el-input v-model=\"role.name\" placeholder=\"Role Name\" />\n        </el-form-item>\n        <el-form-item label=\"Desc\">\n          <el-input\n            v-model=\"role.description\"\n            :autosize=\"{ minRows: 2, maxRows: 4 }\"\n            type=\"textarea\"\n            placeholder=\"Role Description\"\n          />\n        </el-form-item>\n      </el-form>\n      <div style=\"text-align: right\">\n        <el-button type=\"danger\" @click=\"dialogVisible = false\"\n          >Cancel</el-button\n        >\n        <el-button type=\"primary\" @click=\"confirmRole\">Confirm</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport path from 'path'\nimport { deepClone } from '@/utils'\nimport { getRoles, addRole, deleteRole, updateRole } from '@/api/role'\n\n\nexport default {\n  data() {\n    return {\n      role: {},\n      rolesList: [],\n      dialogVisible: false,\n      dialogType: 'new',\n    }\n  },\n  created() {\n    this.getRoles()\n  },\n  methods: {\n    handleDelete({ $index, row }) {\n      this.$confirm('Confirm to remove the role?', 'Warning', {\n        confirmButtonText: 'Confirm',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      })\n        .then(async () => {\n          await deleteRole(row.id)\n          this.rolesList.splice($index, 1)\n          this.$message({\n            type: 'success',\n            message: 'Delete succed!'\n          })\n        })\n        .catch(err => { console.error(err) })\n    },\n\n    async confirmRole() {\n      const isEdit = this.dialogType === 'edit'\n      if (isEdit) {\n        await updateRole(this.role)\n        this.getRoles()\n      } else {\n        await addRole(this.role)\n        this.getRoles()\n      }\n      const { name, description } = this.role\n      this.dialogVisible = false\n      this.$notify({\n        title: 'Success',\n        dangerouslyUseHTMLString: true,\n        message: `\n            <div>Role Name: ${name}</div>\n            <div>Description: ${description}</div>\n          `,\n        type: 'success'\n      })\n      this.role = {}\n    },\n\n    async getRoles() {\n      const res = await getRoles()\n      this.rolesList = res.response\n    },\n    handleAddRole() {\n      this.dialogType = 'new'\n      this.dialogVisible = true\n    },\n    handleEdit(scope) {\n      this.dialogType = 'edit'\n      this.dialogVisible = true\n      this.checkStrictly = true\n      this.role = deepClone(scope.row)\n    }\n  },\n\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.app-container {\n  .roles-table {\n    margin-top: 30px;\n  }\n  .permission-tree {\n    margin-bottom: 30px;\n  }\n}\n</style>\n"]}]}