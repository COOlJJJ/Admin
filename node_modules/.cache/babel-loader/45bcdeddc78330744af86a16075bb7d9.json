{"remainingRequest":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\babel-loader\\lib\\index.js!D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\src\\store\\modules\\user.js","mtime":1649415634191},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\babel.config.js","mtime":1648119135000},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UserData\\Z0047YMR\\Documents\\GitHub\\Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgZ2V0SW5mbyBhcyBfZ2V0SW5mbyB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIGludHJvZHVjdGlvbjogJycsCiAgdXNlcmlkOiAnJywKICBlbWFpbDogJycsCiAgcm9sZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX0lOVFJPRFVDVElPTjogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihzdGF0ZSwgaW50cm9kdWN0aW9uKSB7CiAgICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfSwKICBTRVRfVVNFUklEOiBmdW5jdGlvbiBTRVRfVVNFUklEKHN0YXRlLCB1c2VyaWQpIHsKICAgIHN0YXRlLnVzZXJpZCA9IHVzZXJpZDsKICB9LAogIFNFVF9FTUFJTDogZnVuY3Rpb24gU0VUX0VNQUlMKHN0YXRlLCBlbWFpbCkgewogICAgc3RhdGUuZW1haWwgPSBlbWFpbDsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5yZXNwb25zZTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIGRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXMucmVzcG9uc2U7CgogICAgICAgIGlmICghcmVzcG9uc2UpIHsKICAgICAgICAgIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJvbGVzID0gcmVzcG9uc2Uucm9sZXMsCiAgICAgICAgICAgIG5hbWUgPSByZXNwb25zZS5uYW1lLAogICAgICAgICAgICBhdmF0YXIgPSByZXNwb25zZS5hdmF0YXIsCiAgICAgICAgICAgIGludHJvZHVjdGlvbiA9IHJlc3BvbnNlLmludHJvZHVjdGlvbiwKICAgICAgICAgICAgdXNlcmlkID0gcmVzcG9uc2UudXNlcmlkLAogICAgICAgICAgICBlbWFpbCA9IHJlc3BvbnNlLmVtYWlsOyAvLyByb2xlcyBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5CgogICAgICAgIGlmICghcm9sZXMgfHwgcm9sZXMubGVuZ3RoIDw9IDApIHsKICAgICAgICAgIHJlamVjdCgnZ2V0SW5mbzogcm9sZXMgbXVzdCBiZSBhIG5vbi1udWxsIGFycmF5IScpOwogICAgICAgIH0KCiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCByb2xlcyk7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIG5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJJRCcsIHVzZXJpZCk7CiAgICAgICAgY29tbWl0KCdTRVRfRU1BSUwnLCBlbWFpbCk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgICBjb21taXQoJ1NFVF9JTlRST0RVQ1RJT04nLCBpbnRyb2R1Y3Rpb24pOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNldFJvdXRlcigpOwogICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["D:/UserData/Z0047YMR/Documents/GitHub/Admin-master/src/store/modules/user.js"],"names":["login","getInfo","getToken","setToken","removeToken","resetRouter","state","token","name","avatar","introduction","userid","email","roles","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","SET_USERID","SET_EMAIL","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","data","access_token","catch","error","res","length","logout","dispatch","root","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  userid: '',\n  email: '',\n  roles: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_USERID: (state, userid) => {\n    state.userid = userid\n  },\n  SET_EMAIL: (state, email) => {\n    state.email = email\n  }\n}\n\nconst actions = {\n\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password }).then(response => {\n        const data = response.response\n        commit('SET_TOKEN', data.access_token)\n        setToken(data.access_token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(res => {\n        const { response } = res\n        if (!response) {\n          reject('Verification failed, please Login again.')\n        }\n        const { roles, name, avatar, introduction, userid, email } = response\n        // roles must be a non-empty array\n        if (!roles || roles.length <= 0) {\n          reject('getInfo: roles must be a non-null array!')\n        }\n        commit('SET_ROLES', roles)\n        commit('SET_NAME', name)\n        commit('SET_USERID', userid)\n        commit('SET_EMAIL', email)\n        commit('SET_AVATAR', avatar)\n        commit('SET_INTRODUCTION', introduction)\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, dispatch }) {\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resetRouter()\n      dispatch('tagsView/delAllViews', null, { root: true })\n      resolve()\n    }).catch(error => {\n      reject(error)\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}