{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-5de32900\"],{\"0f69\":function(e,t,r){\"use strict\";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"el-card\",[r(\"el-row\",{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{gutter:20}},[r(\"el-col\",{attrs:{span:7}},[r(\"el-input\",{attrs:{clearable:\"\",placeholder:\"请输入内容\"},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,\"query\",t)},expression:\"queryInfo.query\"}},[r(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},on:{click:e.getUserList},slot:\"append\"})],1)],1),r(\"el-col\",{attrs:{span:4}},[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v(\"添加用户\")])],1)],1),r(\"el-table\",{attrs:{data:e.userlist,border:\"\",stripe:\"\"}},[r(\"el-table-column\",{attrs:{type:\"index\"}}),r(\"el-table-column\",{attrs:{label:\"账号\",prop:\"account\"}}),r(\"el-table-column\",{attrs:{label:\"姓名\",prop:\"userName\"}}),r(\"el-table-column\",{attrs:{label:\"邮箱\",prop:\"email\"}}),r(\"el-table-column\",{attrs:{label:\"角色\",prop:\"roles\"}}),r(\"el-table-column\",{attrs:{label:\"备注\",prop:\"reMark\"}}),r(\"el-table-column\",{attrs:{label:\"状态\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-switch\",{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-value\":\"1\",\"inactive-value\":\"0\"},on:{change:function(r){return e.userStateChanged(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,\"status\",r)},expression:\"scope.row.status\"}})]}}])}),r(\"el-table-column\",{attrs:{label:\"操作\",width:\"180px\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{attrs:{icon:\"el-icon-edit\",size:\"mini\",type:\"primary\"},on:{click:function(r){return e.showEditDialog(t.row)}}}),r(\"el-button\",{attrs:{icon:\"el-icon-delete\",size:\"mini\",type:\"danger\"},on:{click:function(r){return e.removeUserById(t.row.id)}}}),r(\"el-tooltip\",{attrs:{enterable:!1,content:\"分配角色\",effect:\"dark\",placement:\"top-start\"}},[r(\"el-button\",{attrs:{icon:\"el-icon-setting\",size:\"mini\",type:\"warning\"},on:{click:function(r){return e.showGiveRoleDialog(t.row)}}})],1)]}}])})],1),r(\"div\",{staticStyle:{\"margin-top\":\"20px\"}},[r(\"el-pagination\",{attrs:{\"current-page\":e.queryInfo.pagenum,\"page-size\":e.queryInfo.pagesize,\"page-sizes\":[1,2,5,10],total:e.total,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":e.handleCurrentChange,\"size-change\":e.handleSizeChange}})],1)],1),r(\"el-dialog\",{attrs:{visible:e.addDialogVisible,title:\"添加用户\",width:\"35%\"},on:{\"update:visible\":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r(\"el-form\",{ref:\"addFormRef\",attrs:{model:e.addForm,rules:e.addFormRules,\"label-width\":\"70px\"}},[r(\"el-form-item\",{attrs:{label:\"账号\",prop:\"account\"}},[r(\"el-input\",{model:{value:e.addForm.account,callback:function(t){e.$set(e.addForm,\"account\",t)},expression:\"addForm.account\"}})],1),r(\"el-form-item\",{attrs:{label:\"用户名\",prop:\"username\"}},[r(\"el-input\",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,\"username\",t)},expression:\"addForm.username\"}})],1),r(\"el-form-item\",{attrs:{label:\"密码\",prop:\"password\"}},[r(\"el-input\",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,\"password\",t)},expression:\"addForm.password\"}})],1),r(\"el-form-item\",{attrs:{label:\"邮箱\",prop:\"email\"}},[r(\"el-input\",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,\"email\",t)},expression:\"addForm.email\"}})],1),r(\"el-form-item\",{attrs:{label:\"备注\",prop:\"remark\"}},[r(\"el-input\",{model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,\"remark\",t)},expression:\"addForm.remark\"}})],1)],1),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v(\"取 消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.addUser}},[e._v(\"确 定\")])],1)],1),r(\"el-dialog\",{attrs:{visible:e.editDialogVisible,title:\"修改用户\",width:\"35%\"},on:{\"update:visible\":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r(\"el-form\",{ref:\"editFormRef\",attrs:{model:e.editForm,rules:e.editFormRules,\"label-width\":\"70px\"}},[r(\"el-form-item\",{attrs:{label:\"账号\",prop:\"account\"}},[r(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.editForm.account,callback:function(t){e.$set(e.editForm,\"account\",t)},expression:\"editForm.account\"}})],1),r(\"el-form-item\",{attrs:{label:\"用户名\",prop:\"username\"}},[r(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,\"username\",t)},expression:\"editForm.username\"}})],1),r(\"el-form-item\",{attrs:{label:\"邮箱\",prop:\"email\"}},[r(\"el-input\",{attrs:{disabled:\"\"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,\"email\",t)},expression:\"editForm.email\"}})],1),r(\"el-form-item\",{attrs:{label:\"备注\",prop:\"remark\"}},[r(\"el-input\",{model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,\"remark\",t)},expression:\"editForm.remark\"}})],1)],1),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v(\"取 消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.editUser()}}},[e._v(\"确 定\")])],1)],1),r(\"el-dialog\",{attrs:{visible:e.giveDialogVisible,title:\"分配角色\",width:\"35%\"},on:{\"update:visible\":function(t){e.giveDialogVisible=t},close:e.giveDialogClosed}},[r(\"el-form\",{ref:\"giveFormRef\",attrs:{model:e.giveForm,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"当前账号:\"}},[r(\"span\",[e._v(e._s(e.giveForm.account))])]),r(\"el-form-item\",{attrs:{label:\"当前用户:\"}},[r(\"span\",[e._v(e._s(e.giveForm.username))])]),r(\"el-form-item\",{attrs:{label:\"当前角色:\"}},[r(\"span\",[e._v(e._s(e.giveForm.roles)+\" \")])]),r(\"el-form-item\",{attrs:{label:\"分配新角色:\"}},[r(\"el-select\",{attrs:{multiple:\"\",\"collapse-tags\":\"\",placeholder:\"请选择角色\"},model:{value:e.giveForm.newrole,callback:function(t){e.$set(e.giveForm,\"newrole\",t)},expression:\"giveForm.newrole\"}},e._l(e.rolelist,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.giveDialogVisible=!1}}},[e._v(\"取 消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.giveRole()}}},[e._v(\"确 定\")])],1)],1)],1)},i=[],o=r(\"1da1\"),n=(r(\"96cf\"),r(\"ac1f\"),r(\"00b4\"),r(\"c24f\")),s=r(\"cc5e\"),l=(r(\"ed08\"),{data:function(){var e=function(e,t,r){var a=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/;if(a.test(t))return r();r(new Error(\"请输入合法的邮箱\"))};return{queryInfo:{query:\"\",pagenum:1,pagesize:5},userlist:[],rolelist:[],total:0,addDialogVisible:!1,editDialogVisible:!1,giveDialogVisible:!1,addForm:{account:\"\",username:\"\",password:\"\",email:\"\",remark:\"\"},editForm:{account:\"\",userid:\"\",username:\"\",email:\"\",remark:\"\"},giveForm:{userid:\"\",account:\"\",username:\"\",roles:\"\",newrole:[]},addFormRules:{account:[{required:!0,message:\"请输入账号\",trigger:\"blur\"}],username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"},{min:3,max:5,message:\"长度在 3 到 5 个字符\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"},{min:6,max:15,message:\"长度在 6 到 15 个字符\",trigger:\"blur\"}],email:[{required:!0,message:\"请输入邮箱\",trigger:\"blur\"},{validator:e,trigger:\"blur\"}]},editFormRules:{email:[{required:!0,message:\"请输入邮箱\",trigger:\"blur\"},{validator:e,trigger:\"blur\"}]}}},created:function(){this.getUserList(),this.getRoleList()},methods:{getRoleList:function(){var e=this;return Object(o[\"a\"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s[\"c\"])();case 2:r=t.sent,e.rolelist=r.response;case 4:case\"end\":return t.stop()}}),t)})))()},getUserList:function(){var e=this;return Object(o[\"a\"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n[\"g\"])(e.queryInfo);case 2:r=t.sent,e.userlist=r.response.userList,e.total=r.response.totalpage;case 5:case\"end\":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},userStateChanged:function(e){var t=this;return Object(o[\"a\"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(n[\"c\"])({userid:\"\".concat(e.id),status:\"\".concat(e.status)});case 2:if(a=r.sent,201!=a.status){r.next=6;break}return\"1\"==e.status?e.status=\"0\":e.status=\"1\",r.abrupt(\"return\",t.$message.error(\"更新用户状态失败!\"));case 6:t.$message.success(\"更新用户状态成功!\");case 7:case\"end\":return r.stop()}}),r)})))()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},giveDialogClosed:function(){this.giveForm.newrole=0},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(o[\"a\"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt(\"return\");case 2:return console.log(e.addForm),t.next=5,Object(n[\"a\"])(e.addForm);case 5:t.sent,e.$message.success(\"添加成功\"),e.addDialogVisible=!1,e.getUserList();case 9:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){this.editDialogVisible=!0,this.editForm.userid=e.id,this.editForm.account=e.account,this.editForm.username=e.userName,this.editForm.email=e.email,this.editForm.remark=e.reMark},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editUser:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(o[\"a\"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt(\"return\");case 2:return t.next=4,Object(n[\"e\"])(e.editForm);case 4:t.sent,e.$message.success(\"修改成功\"),e.editDialogVisible=!1,e.getUserList();case 8:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeUserById:function(e){var t=this;return Object(o[\"a\"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm(\"此操作将永久删除该用户, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).catch((function(e){return e}));case 2:if(a=r.sent,\"confirm\"===a){r.next=5;break}return r.abrupt(\"return\",t.$message.info(\"已经取消删除\"));case 5:return r.next=7,Object(n[\"d\"])(e);case 7:r.sent,t.$message.success(\"删除成功\"),t.getUserList();case 10:case\"end\":return r.stop()}}),r)})))()},showGiveRoleDialog:function(e){this.giveForm.userid=e.id,this.giveForm.account=e.account,this.giveForm.username=e.userName,this.giveForm.roles=e.roles,this.giveDialogVisible=!0},giveRole:function(){var e=this;return Object(o[\"a\"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n[\"h\"])({userid:e.giveForm.userid,newrole:e.giveForm.newrole});case 2:t.sent,e.$message.success(\"分配角色成功\"),e.getUserList(),e.giveDialogVisible=!1;case 6:case\"end\":return t.stop()}}),t)})))()}}}),u=l,c=r(\"2877\"),d=Object(c[\"a\"])(u,a,i,!1,null,\"19c7c41e\",null);t[\"default\"]=d.exports},cc5e:function(e,t,r){\"use strict\";r.d(t,\"c\",(function(){return i})),r.d(t,\"d\",(function(){return o})),r.d(t,\"a\",(function(){return n})),r.d(t,\"e\",(function(){return s})),r.d(t,\"b\",(function(){return l}));var a=r(\"b775\");function i(){return Object(a[\"a\"])({url:\"/Role/GetAllRoles\",method:\"get\"})}function o(){return Object(a[\"a\"])({url:\"/Role/GetRoles\",method:\"get\"})}function n(e){return Object(a[\"a\"])({url:\"/Role/AddRole\",method:\"post\",data:e})}function s(e){return Object(a[\"a\"])({url:\"/Role/UpdateRole\",method:\"post\",data:e})}function l(e){return Object(a[\"a\"])({url:\"/Role/DeleteRole\",method:\"get\",params:{id:e}})}}}]);","extractedComments":[]}